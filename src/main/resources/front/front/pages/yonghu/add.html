<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1" name="viewport">
    <title>注册</title>
    <!-- bootstrap样式，地图插件使用 -->
    <link href="../../css/bootstrap.min.css" rel="stylesheet"/>
    <link href="../../layui/css/layui.css" rel="stylesheet">
    <!-- 样式 -->
    <link href="../../css/style.css" rel="stylesheet"/>
    <!-- 主题（主要颜色设置） -->
    <link href="../../css/theme.css" rel="stylesheet"/>
    <!-- 通用的css -->
    <link href="../../css/common.css" rel="stylesheet"/>
</head>
<style>
    html::after {
        position: fixed;
        top: 0;
        right: 0;
        left: 0;
        bottom: 0;
        content: '';
        display: block;
        background-attachment: fixed;
        background-size: cover;
        background-position: center;
        z-index: -1;
    }

    #swiper {
        overflow: hidden;
        margin: 0 auto;
    }

    #swiper .layui-carousel-ind li {
        width: 20px;
        height: 20px;
        border-width: 0;
        border-style: solid;
        border-color: rgba(255, 255, 255, 0.3);
        border-radius: 10px;
        background-color: rgba(255, 255, 255, 1);
        box-shadow: 0 0 0px rgba(255, 0, 0, .8);
    }

    #swiper .layui-carousel-ind li.layui-this {
        width: 20px;
        height: 20px;
        border-width: 0;
        border-style: solid;
        border-color: rgba(0, 0, 0, .3);
        border-radius: 10;
        background-color: rgba(255, 153, 0, 1);
        box-shadow: 0 0 0px rgba(255, 0, 0, .8);
    }

    button, button:focus {
        outline: none;
    }

    .data-add-container .add .layui-select-title .layui-unselect {
        padding: 0 12px;
        height: 40px;
        font-size: 14px;
        color: #333;
        border-radius: 4px;
        border-width: 1px;
        border-style: solid;
        border-color: #DCDFE6;
        background-color: #fff;
        box-shadow: 0 0 6px rgba(213, 213, 213, 0.3);
        text-align: left;
    }

    .data-add-container .add .layui-form-item {
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .data-add-container .layui-form-pane .layui-form-item[pane] .layui-form-label {
        margin: 0;
        position: inherit;
        background: transparent;
        border: 0;
    }

    .data-add-container .add .layui-input-block {
        margin: 0;
        flex: 1;
    }

    .data-add-container .layui-form-pane .layui-form-item[pane] .layui-input-inline {
        margin: 0;
        flex: 1;
        display: flex;
    }
</style>
<body style="background: #EEEEEE; ">

<div id="app" style="max-width: 1240px;margin: 0 auto">

    <!--
    <div class="layui-carousel" id="swiper">
        <div carousel-item id="swiper-item">
            <div v-for="(item,index) in swiperList" v-bind:key="index">
                <img class="swiper-item" :src="item.img">
            </div>
        </div>
    </div> -->
    <div :style='{"boxShadow":"0 0 0px rgba(255,0,0,.8)","margin":"0 auto","borderColor":"rgba(255, 255, 255, 0.3)","borderRadius":"0px","borderWidth":"0","width":"90%","borderStyle":"solid"}' class="layui-carousel"
         id="swiper">
        <div carousel-item id="swiper-item">
            <div :key="index" v-for="(item,index) in swiperList">
                <img :src="item.img" style="width: 100%;height: 100%;object-fit:cover;"/>
            </div>
        </div>
    </div>
    <!-- 轮播图 -->

    <div :style='{"padding":"20px","boxShadow":"1px 1px 6px rgba(213, 213, 213, 0.3)","margin":"30px auto","borderColor":"rgba(213, 213, 213, 0.3)","backgroundColor":"#fff","borderRadius":"10px","borderWidth":"1px","borderStyle":"solid"}'
         class="data-add-container">

        <form class="layui-form layui-form-pane add" lay-filter="myForm">

            <div :style='{"padding":"10px","boxShadow":"0 0 6px rgba(213, 213, 213, 0.3)","margin":"0 0 10px 0","borderColor":"rgba(213, 213, 213, 0.3)","backgroundColor":"#fff","borderRadius":"4px","borderWidth":"0 0 1px 0","borderStyle":"solid"}'
                 class="layui-form-item" pane>
                <label :style='{"width":"94px","padding":"0 12px 0 0","fontSize":"14px","color":"#333","textAlign":"right"}'
                       class="layui-form-label">账号：</label>
                <div class="layui-input-block">
                    <input :readonly="ro.zhanghao"
                           :style='{"padding":"0 12px","boxShadow":"0 0 6px rgba(213, 213, 213, 0.3)","borderColor":"#DCDFE6","backgroundColor":"#fff","color":"#333","borderRadius":"4px","textAlign":"left","borderWidth":"1px","fontSize":"14px","borderStyle":"solid","height":"40px"}' autocomplete="off" class="layui-input" id="zhanghao" name="zhanghao"
                           type="text" v-model="detail.zhanghao">
                </div>
            </div>
            <div :style='{"padding":"10px","boxShadow":"0 0 6px rgba(213, 213, 213, 0.3)","margin":"0 0 10px 0","borderColor":"rgba(213, 213, 213, 0.3)","backgroundColor":"#fff","borderRadius":"4px","borderWidth":"0 0 1px 0","borderStyle":"solid"}'
                 class="layui-form-item" pane>
                <label :style='{"width":"94px","padding":"0 12px 0 0","fontSize":"14px","color":"#333","textAlign":"right"}'
                       class="layui-form-label">密码：</label>
                <div class="layui-input-block">
                    <input :readonly="ro.mima"
                           :style='{"padding":"0 12px","boxShadow":"0 0 6px rgba(213, 213, 213, 0.3)","borderColor":"#DCDFE6","backgroundColor":"#fff","color":"#333","borderRadius":"4px","textAlign":"left","borderWidth":"1px","fontSize":"14px","borderStyle":"solid","height":"40px"}' autocomplete="off" class="layui-input" id="mima" name="mima"
                           type="text" v-model="detail.mima">
                </div>
            </div>
            <div :style='{"padding":"10px","boxShadow":"0 0 6px rgba(213, 213, 213, 0.3)","margin":"0 0 10px 0","borderColor":"rgba(213, 213, 213, 0.3)","backgroundColor":"#fff","borderRadius":"4px","borderWidth":"0 0 1px 0","borderStyle":"solid"}'
                 class="layui-form-item" pane>
                <label :style='{"width":"94px","padding":"0 12px 0 0","fontSize":"14px","color":"#333","textAlign":"right"}'
                       class="layui-form-label">姓名：</label>
                <div class="layui-input-block">
                    <input :readonly="ro.xingming"
                           :style='{"padding":"0 12px","boxShadow":"0 0 6px rgba(213, 213, 213, 0.3)","borderColor":"#DCDFE6","backgroundColor":"#fff","color":"#333","borderRadius":"4px","textAlign":"left","borderWidth":"1px","fontSize":"14px","borderStyle":"solid","height":"40px"}' autocomplete="off" class="layui-input" id="xingming" name="xingming"
                           type="text" v-model="detail.xingming">
                </div>
            </div>
            <div :style='{"padding":"10px","boxShadow":"0 0 6px rgba(213, 213, 213, 0.3)","margin":"0 0 10px 0","borderColor":"rgba(213, 213, 213, 0.3)","backgroundColor":"#fff","borderRadius":"4px","borderWidth":"0 0 1px 0","borderStyle":"solid"}'
                 class="layui-form-item" pane>
                <label :style='{"width":"94px","padding":"0 12px 0 0","fontSize":"14px","color":"#333","textAlign":"right"}'
                       class="layui-form-label">性别：</label>
                <div class="layui-input-block">
                    <select id="xingbie" lay-filter="xingbie" name="xingbie">
                        <option value="">请选择</option>
                        <option :value="item" v-bind:key="index" v-for="(item,index) in xingbie">{{item}}</option>
                    </select>
                </div>
            </div>
            <div :style='{"padding":"10px","boxShadow":"0 0 6px rgba(213, 213, 213, 0.3)","margin":"0 0 10px 0","borderColor":"rgba(213, 213, 213, 0.3)","backgroundColor":"#fff","borderRadius":"4px","borderWidth":"0 0 1px 0","borderStyle":"solid"}'
                 class="layui-form-item" pane>
                <label :style='{"width":"94px","padding":"0 12px 0 0","fontSize":"14px","color":"#333","textAlign":"right"}'
                       class="layui-form-label">手机：</label>
                <div class="layui-input-block">
                    <input :readonly="ro.shouji"
                           :style='{"padding":"0 12px","boxShadow":"0 0 6px rgba(213, 213, 213, 0.3)","borderColor":"#DCDFE6","backgroundColor":"#fff","color":"#333","borderRadius":"4px","textAlign":"left","borderWidth":"1px","fontSize":"14px","borderStyle":"solid","height":"40px"}' autocomplete="off" class="layui-input" id="shouji" name="shouji"
                           type="text" v-model="detail.shouji">
                </div>
            </div>
            <div :style='{"padding":"10px","boxShadow":"0 0 6px rgba(213, 213, 213, 0.3)","margin":"0 0 10px 0","borderColor":"rgba(213, 213, 213, 0.3)","backgroundColor":"#fff","borderRadius":"4px","borderWidth":"0 0 1px 0","borderStyle":"solid"}'
                 class="layui-form-item" pane>
                <label :style='{"width":"94px","padding":"0 12px 0 0","fontSize":"14px","color":"#333","textAlign":"right"}'
                       class="layui-form-label">邮箱：</label>
                <div class="layui-input-block">
                    <input :readonly="ro.youxiang"
                           :style='{"padding":"0 12px","boxShadow":"0 0 6px rgba(213, 213, 213, 0.3)","borderColor":"#DCDFE6","backgroundColor":"#fff","color":"#333","borderRadius":"4px","textAlign":"left","borderWidth":"1px","fontSize":"14px","borderStyle":"solid","height":"40px"}' autocomplete="off" class="layui-input" id="youxiang" name="youxiang"
                           type="text" v-model="detail.youxiang">
                </div>
            </div>
            <div :style='{"padding":"10px","boxShadow":"0 0 6px rgba(213, 213, 213, 0.3)","margin":"0 0 10px 0","borderColor":"rgba(213, 213, 213, 0.3)","backgroundColor":"#fff","borderRadius":"4px","borderWidth":"0 0 1px 0","borderStyle":"solid"}'
                 class="layui-form-item" pane>
                <label :style='{"width":"94px","padding":"0 12px 0 0","fontSize":"14px","color":"#333","textAlign":"right"}'
                       class="layui-form-label">照片：</label>
                <div class="layui-input-block">
                    <div style="display:inline-block;margin-right:10px;" v-if="detail.zhaopian">
                        <img :src="detail.zhaopian"
                             id="zhaopianImg"
                             style="width: 100px;height: 100px;border-radius: 50%;border: 2px solid #EEEEEE;">
                        <input :value="detail.zhaopian" id="zhaopian" name="zhaopian" type="hidden"/>
                    </div>
                    <button :style='{"padding":"0 10px","boxShadow":"0 0 0px rgba(255,0,0,.5)","margin":"0 10px 0 0","borderColor":"#ccc","backgroundColor":"rgba(255, 153, 0, 1)","color":"#fff","borderRadius":"8px","borderWidth":"0","width":"auto","fontSize":"14px","borderStyle":"solid","height":"44px"}'
                            class="layui-btn btn-theme"
                            id="zhaopianUpload" type="button" v-if="!ro.zhaopian">
                        <i :style='{"color":"#fff","show":true,"fontSize":"14px"}' class="layui-icon" v-if="true">&#xe67c;</i>上传照片
                    </button>
                </div>
            </div>
            <div :style='{"padding":"10px","boxShadow":"0 0 6px rgba(213, 213, 213, 0.3)","margin":"0 0 10px 0","borderColor":"rgba(213, 213, 213, 0.3)","backgroundColor":"#fff","borderRadius":"4px","borderWidth":"0 0 1px 0","borderStyle":"solid"}'
                 class="layui-form-item" pane>
                <label :style='{"width":"94px","padding":"0 12px 0 0","fontSize":"14px","color":"#333","textAlign":"right"}'
                       class="layui-form-label">余额：</label>
                <div class="layui-input-block">
                    <input :readonly="ro.money"
                           :style='{"padding":"0 12px","boxShadow":"0 0 6px rgba(213, 213, 213, 0.3)","borderColor":"#DCDFE6","backgroundColor":"#fff","color":"#333","borderRadius":"4px","textAlign":"left","borderWidth":"1px","fontSize":"14px","borderStyle":"solid","height":"40px"}' autocomplete="off" class="layui-input" id="money" name="money"
                           type="text" v-model="detail.money">
                </div>
            </div>


            <div :style='{"padding":"10px","boxShadow":"0 0 6px rgba(213, 213, 213, 0.3)","margin":"0 0 10px 0","borderColor":"rgba(213, 213, 213, 0.3)","backgroundColor":"#fff","borderRadius":"4px","borderWidth":"0 0 1px 0","borderStyle":"solid"}'
                 class="layui-form-item">
                <div class="layui-input-block" style="text-align: right;">
                    <button :style='{"padding":"0 10px","boxShadow":"0 0 0px rgba(255,0,0,.5)","margin":"0 10px","borderColor":"#ccc","backgroundColor":"rgba(255, 153, 0, 1)","color":"#fff","borderRadius":"8px","borderWidth":"0","width":"25%","fontSize":"14px","borderStyle":"solid","height":"44px"}'
                            class="layui-btn btn-submit" lay-filter="*" lay-submit>提交
                    </button>
                    <button :style='{"padding":"0 10px","boxShadow":"0 0 2px rgb(255,153,0)","margin":"0 10px","borderColor":"#ccc","backgroundColor":"#fff","color":"rgba(255, 153, 0, 1)","borderRadius":"8px","borderWidth":"0","width":"25%","fontSize":"14px","borderStyle":"solid","height":"44px"}'
                            class="layui-btn layui-btn-primary" type="reset">重置
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>

<script src="../../layui/layui.js"></script>
<script src="../../js/vue.js"></script>
<!-- 组件配置信息 -->
<script src="../../js/config.js"></script>
<!-- 扩展插件配置信息 -->
<script src="../../modules/config.js"></script>
<!-- 工具方法 -->
<script src="../../js/utils.js"></script>
<!-- 校验格式工具类 -->
<script src="../../js/validate.js"></script>
<!-- 地图 -->
<script src="../../js/jquery.js" type="text/javascript"></script>
<script src="http://webapi.amap.com/maps?v=1.3&key=ca04cee7ac952691aa67a131e6f0cee0" type="text/javascript"></script>
<script src="../../js/bootstrap.min.js" type="text/javascript"></script>
<script src="../../js/bootstrap.AMapPositionPicker.js" type="text/javascript"></script>

<script>
    var jquery = $;

    var vue = new Vue({
        el: '#app',
        data: {
            // 轮播图
            swiperList: [{
                img: '../../img/banner.jpg'
            }],
            dataList: [],
            ro: {
                zhanghao: false,
                mima: false,
                xingming: false,
                xingbie: false,
                shouji: false,
                youxiang: false,
                zhaopian: false,
                beizhu: false,
                money: false,
            },
            detail: {
                zhanghao: '',
                mima: '',
                xingming: '',
                xingbie: '',
                shouji: '',
                youxiang: '',
                zhaopian: '',
                beizhu: '',
                money: '',
            },
            xingbie: [],
            centerMenu: centerMenu
        },
        updated: function () {
            layui.form.render('select', 'myForm');
        },
        computed: {},
        methods: {
            jump(url) {
                jump(url)
            }
        }
    })


    layui.use(['layer', 'element', 'carousel', 'http', 'jquery', 'form', 'upload', 'laydate', 'tinymce'], function () {
        var layer = layui.layer;
        var element = layui.element;
        var carousel = layui.carousel;
        var http = layui.http;
        var jquery = layui.jquery;
        var form = layui.form;
        var upload = layui.upload;
        var laydate = layui.laydate;
        var tinymce = layui.tinymce

        // 获取轮播图 数据
        http.request('config/list', 'get', {
            page: 1,
            limit: 5
        }, function (res) {
            if (res.data.list.length > 0) {
                var swiperItemHtml = '';
                for (let item of res.data.list) {
                    if (item.name.indexOf('picture') >= 0 && item.value && item.value != "" && item.value != null) {
                        swiperItemHtml +=
                            '<div>' +
                            '<img style="width: 100%;height: 100%;object-fit:cover;" class="swiper-item" src="' + item.value + '">' +
                            '</div>';
                    }
                }
                jquery('#swiper-item').html(swiperItemHtml);
                // 轮播图
                vue.$nextTick(() => {
                    carousel.render({
                        elem: '#swiper',
                        width: '90%',
                        height: '500px',
                        arrow: 'hover',
                        anim: 'default',
                        autoplay: 'true',
                        interval: '3000',
                        indicator: 'inside'
                    });

                })
                // carousel.render({
                // 	elem: '#swiper',
                // 	width: swiper.width,height:swiper.height,
                // 	arrow: swiper.arrow,
                // 	anim: swiper.anim,
                // 	interval: swiper.interval,
                // 	indicator: "none"
                // });
            }
        });

        vue.xingbie = '男,女'.split(',')
        // 上传图片
        var zhaopianUpload = upload.render({
            //绑定元素
            elem: '#zhaopianUpload',
            //上传接口
            url: http.baseurl + 'file/upload',
            // 请求头
            headers: {
                Token: localStorage.getItem('Token')
            },
            // 允许上传时校验的文件类型
            accept: 'images',
            before: function () {
                //loading层
                var index = layer.load(1, {
                    shade: [0.1, '#fff'] //0.1透明度的白色背景
                });
            },
            // 上传成功
            done: function (res) {
                console.log(res);
                layer.closeAll();
                if (res.code == 0) {
                    layer.msg("上传成功", {
                        time: 2000,
                        icon: 6
                    })
                    var url = http.baseurl + 'upload/' + res.file;
                    jquery('#zhaopian').val(url);
                    jquery('#zhaopianImg').attr('src', url)
                    vue.detail.zhaopian = url;
                } else {
                    layer.msg(res.msg, {
                        time: 2000,
                        icon: 5
                    })
                }
            },
            //请求异常回调
            error: function () {
                layer.closeAll();
                layer.msg("请求接口异常", {
                    time: 2000,
                    icon: 5
                })
            }
        });

        // session独取
        let table = localStorage.getItem("userTable");
        http.request(`${table}/session`, 'get', {}, function (data) {
            // 表单赋值
            //form.val("myForm", data.data);
            data = data.data
            for (var key in data) {
            }
        });

        // 跨表
        if (http.getParam('corss')) {
            var obj = JSON.parse(localStorage.getItem('crossObj'));
            for (var o in obj) {
                if (o == 'zhanghao') {
                    vue.detail[o] = obj[o];
                    vue.ro.zhanghao = true;
                    continue;
                }
                if (o == 'mima') {
                    vue.detail[o] = obj[o];
                    vue.ro.mima = true;
                    continue;
                }
                if (o == 'xingming') {
                    vue.detail[o] = obj[o];
                    vue.ro.xingming = true;
                    continue;
                }
                if (o == 'xingbie') {
                    vue.detail[o] = obj[o];
                    vue.ro.xingbie = true;
                    continue;
                }
                if (o == 'shouji') {
                    vue.detail[o] = obj[o];
                    vue.ro.shouji = true;
                    continue;
                }
                if (o == 'youxiang') {
                    vue.detail[o] = obj[o];
                    vue.ro.youxiang = true;
                    continue;
                }
                if (o == 'zhaopian') {
                    vue.detail[o] = obj[o];
                    vue.ro.zhaopian = true;
                    continue;
                }
                if (o == 'beizhu') {
                    vue.detail[o] = obj[o];
                    vue.ro.beizhu = true;
                    continue;
                }
                if (o == 'money') {
                    vue.detail[o] = obj[o];
                    vue.ro.money = true;
                    continue;
                }
            }
        }


        // 提交
        form.on('submit(*)', function (data) {
            data = data.field;

            // 数据校验
            if (!data.zhanghao) {
                layer.msg('账号不能为空', {
                    time: 2000,
                    icon: 5
                });
                return false
            }
            if (!data.mima) {
                layer.msg('密码不能为空', {
                    time: 2000,
                    icon: 5
                });
                return false
            }
            if (!isMobile(data.shouji)) {
                layer.msg('手机应输入手机格式', {
                    time: 2000,
                    icon: 5
                });
                return false
            }
            if (!isEmail(data.youxiang)) {
                layer.msg('邮箱应输入邮箱格式', {
                    time: 2000,
                    icon: 5
                });
                return false
            }
            if (!isNumber(data.money)) {
                layer.msg('余额应输入数字', {
                    time: 2000,
                    icon: 5
                });
                return false
            }

            // 跨表计算

            // 比较大小

            // 提交数据
            http.requestJson('yonghu' + '/add', 'post', data, function (res) {
                layer.msg('提交成功', {
                    time: 2000,
                    icon: 6
                }, function () {
                    back();
                });
            });

            return false
        });

    });
</script>
</body>
</html>
